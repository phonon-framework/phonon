(function(e,t){"use strict";var n=null,a=a||function(a){var s={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5},i={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},r={},o={hasTouch:"ontouchstart"in t.documentElement||e.navigator.msPointerEnabled,eventType:function(e){var t={down:o.hasTouch?"touchstart":"mousedown",move:o.hasTouch?"touchmove":"mousemove",up:o.hasTouch?"touchend":"mouseup",out:o.hasTouch?"touchcancel":"mouseout"};return t[e]},page:function(e,t){return o.hasTouch&&t.touches.length&&t.touches[0]?t.touches[0]["page"+e]:t["page"+e]},klass:{has:function(e,t){return e.className.indexOf(t)!==-1},add:function(e,t){!o.klass.has(e,t)&&s.addBodyClasses&&(e.className+=" "+t)},remove:function(e,t){s.addBodyClasses&&(e.className=e.className.replace(t,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(e){if("function"==typeof r[e])return r[e].call()},createBackdrop:function(){if(!n){var e=document.createElement("div");e.classList.add("backdrop-panel"),n=e,s.element.appendChild(n)}},removeBackdrop:function(){if(n){var e=function(){n&&(n.classList.remove("fadeout"),s.element.removeChild(n),n.off(phonon.event.transitionEnd,e),n=null)};n.classList.add("fadeout"),n.on(phonon.event.transitionEnd,e)}},vendor:function(){var e,n=t.createElement("div"),a="webkit Moz O ms".split(" ");for(e in a)if("undefined"!=typeof n.style[a[e]+"Transition"])return a[e]},transitionCallback:function(){return"Moz"===i.vendor||"ms"===i.vendor?"transitionend":i.vendor+"TransitionEnd"},canTransform:function(){return"undefined"!=typeof s.element.style[i.vendor+"Transform"]},deepExtend:function(e,t){var n;for(n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},o.deepExtend(e[n],t[n])):e[n]=t[n];return e},angleOfDrag:function(e,t){var n,a;return a=Math.atan2(-(i.startDragY-t),i.startDragX-e),a<0&&(a+=2*Math.PI),n=Math.floor(a*(180/Math.PI)-180),n<0&&n>-180&&(n=360-Math.abs(n)),Math.abs(n)},events:{addEvent:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},removeEvent:function(e,t,n){return e.addEventListener?e.removeEventListener(t,n,!1):e.attachEvent?e.detachEvent("on"+t,n):void 0},prevent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},parentUntil:function(e,t){for(var n="string"==typeof t;e.parentNode;){if(n&&e.getAttribute&&e.getAttribute(t))return e;if(!n&&e===t)return e;e=e.parentNode}return null}},l={translate:{get:{matrix:function(t){if(o.canTransform()){var n=e.getComputedStyle(s.element)[i.vendor+"Transform"].match(/\((.*)\)/),a=8;return n?(n=n[1].split(","),16===n.length&&(t+=a),parseInt(n[t],10)):0}return parseInt(s.element.style.left,10)}},easeCallback:function(){s.element.style[i.vendor+"Transition"]="",i.translation=l.translate.get.matrix(4),i.easing=!1,clearInterval(i.animatingInterval),0===i.easingTo&&(o.klass.remove(t.body,"snapjs-right"),o.klass.remove(t.body,"snapjs-left")),o.dispatchEvent("animated"),o.events.removeEvent(s.element,o.transitionCallback(),l.translate.easeCallback)},easeTo:function(e){0===e&&o.removeBackdrop(),o.canTransform()?(i.easing=!0,i.easingTo=e,s.element.style[i.vendor+"Transition"]="all "+s.transitionSpeed+"s "+s.easing,i.animatingInterval=setInterval(function(){o.dispatchEvent("animating")},1),o.events.addEvent(s.element,o.transitionCallback(),l.translate.easeCallback),l.translate.x(e)):(i.translation=e,l.translate.x(e)),0===e&&(s.element.style[i.vendor+"Transform"]="")},x:function(n){if(!("left"===s.disable&&n>0||"right"===s.disable&&n<0))if(s.hyperextensible||(n===s.maxPosition||n>s.maxPosition?n=s.maxPosition:(n===s.minPosition||n<s.minPosition)&&(n=s.minPosition)),n=parseInt(n,10),isNaN(n)&&(n=0),o.canTransform()){var a="translate3d("+n+"px, 0,0)";s.element.style[i.vendor+"Transform"]=a}else s.element.style.width=(e.innerWidth||t.documentElement.clientWidth)+"px",s.element.style.left=n+"px",s.element.style.right=""}},drag:{listen:function(){i.translation=0,i.easing=!1,o.events.addEvent(s.element,o.eventType("down"),l.drag.startDrag),o.events.addEvent(s.element,o.eventType("move"),l.drag.dragging),o.events.addEvent(s.element,o.eventType("up"),l.drag.endDrag)},stopListening:function(){o.events.removeEvent(s.element,o.eventType("down"),l.drag.startDrag),o.events.removeEvent(s.element,o.eventType("move"),l.drag.dragging),o.events.removeEvent(s.element,o.eventType("up"),l.drag.endDrag)},startDrag:function(e){var t=e.target?e.target:e.srcElement,n=o.parentUntil(t,"data-snap-ignore");if(n)return void o.dispatchEvent("ignore");if(s.dragger){var a=o.parentUntil(t,s.dragger);if(!a&&i.translation!==s.minPosition&&i.translation!==s.maxPosition)return}o.dispatchEvent("start"),s.element.style[i.vendor+"Transition"]="",i.isDragging=!0,i.hasIntent=null,i.intentChecked=!1,i.startDragX=o.page("X",e),i.startDragY=o.page("Y",e),i.dragWatchers={current:0,last:0,hold:0,state:""},i.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(e){if(i.isDragging&&s.touchToDrag){var n,a=o.page("X",e),r=o.page("Y",e),d=i.translation,c=l.translate.get.matrix(4),p=a-i.startDragX,g=c>0,u=p;if(i.intentChecked&&!i.hasIntent)return;if(s.addBodyClasses&&(c>0?(o.klass.add(t.body,"snapjs-left"),o.klass.remove(t.body,"snapjs-right")):c<0&&(o.klass.add(t.body,"snapjs-right"),o.klass.remove(t.body,"snapjs-left"))),i.hasIntent===!1||null===i.hasIntent){var h=o.angleOfDrag(a,r),f=h>=0&&h<=s.slideIntent||h<=360&&h>360-s.slideIntent,m=h>=180&&h<=180+s.slideIntent||h<=180&&h>=180-s.slideIntent;m||f?i.hasIntent=!0:i.hasIntent=!1,i.intentChecked=!0}if(s.minDragDistance>=Math.abs(a-i.startDragX)||i.hasIntent===!1)return;o.events.prevent(e),o.dispatchEvent("drag"),i.dragWatchers.current=a,i.dragWatchers.last>a?("left"!==i.dragWatchers.state&&(i.dragWatchers.state="left",i.dragWatchers.hold=a),i.dragWatchers.last=a):i.dragWatchers.last<a&&("right"!==i.dragWatchers.state&&(i.dragWatchers.state="right",i.dragWatchers.hold=a),i.dragWatchers.last=a),g?(s.maxPosition<c&&(n=(c-s.maxPosition)*s.resistance,u=p-n),i.simpleStates={opening:"left",towards:i.dragWatchers.state,hyperExtending:s.maxPosition<c,halfway:c>s.maxPosition/2,flick:Math.abs(i.dragWatchers.current-i.dragWatchers.hold)>s.flickThreshold,translation:{absolute:c,relative:p,sinceDirectionChange:i.dragWatchers.current-i.dragWatchers.hold,percentage:c/s.maxPosition*100}}):(s.minPosition>c&&(n=(c-s.minPosition)*s.resistance,u=p-n),i.simpleStates={opening:"right",towards:i.dragWatchers.state,hyperExtending:s.minPosition>c,halfway:c<s.minPosition/2,flick:Math.abs(i.dragWatchers.current-i.dragWatchers.hold)>s.flickThreshold,translation:{absolute:c,relative:p,sinceDirectionChange:i.dragWatchers.current-i.dragWatchers.hold,percentage:c/s.minPosition*100}}),l.translate.x(u+d)}u>5&&o.createBackdrop()},endDrag:function(e){if(i.isDragging){o.dispatchEvent("end");var t=l.translate.get.matrix(4);if(0===i.dragWatchers.current&&0!==t&&s.tapToClose)return o.dispatchEvent("close"),o.events.prevent(e),l.translate.easeTo(0),i.isDragging=!1,void(i.startDragX=0);"left"===i.simpleStates.opening?i.simpleStates.halfway||i.simpleStates.hyperExtending||i.simpleStates.flick?i.simpleStates.flick&&"left"===i.simpleStates.towards?l.translate.easeTo(0):(i.simpleStates.flick&&"right"===i.simpleStates.towards||i.simpleStates.halfway||i.simpleStates.hyperExtending)&&l.translate.easeTo(s.maxPosition):l.translate.easeTo(0):"right"===i.simpleStates.opening&&(i.simpleStates.halfway||i.simpleStates.hyperExtending||i.simpleStates.flick?i.simpleStates.flick&&"right"===i.simpleStates.towards?l.translate.easeTo(0):(i.simpleStates.flick&&"left"===i.simpleStates.towards||i.simpleStates.halfway||i.simpleStates.hyperExtending)&&l.translate.easeTo(s.minPosition):l.translate.easeTo(0)),i.isDragging=!1,i.startDragX=o.page("X",e)}}}},d=function(e){e.element&&(o.deepExtend(s,e),i.vendor=o.vendor(),l.drag.listen())};this.open=function(e){o.createBackdrop(),o.dispatchEvent("open"),o.klass.remove(t.body,"snapjs-expand-left"),o.klass.remove(t.body,"snapjs-expand-right"),"left"===e?(i.simpleStates.opening="left",i.simpleStates.towards="right",o.klass.add(t.body,"snapjs-left"),o.klass.remove(t.body,"snapjs-right"),l.translate.easeTo(s.maxPosition)):"right"===e&&(i.simpleStates.opening="right",i.simpleStates.towards="left",o.klass.remove(t.body,"snapjs-left"),o.klass.add(t.body,"snapjs-right"),l.translate.easeTo(s.minPosition))},this.close=function(){o.dispatchEvent("close"),l.translate.easeTo(0)},this.expand=function(n){var a=e.innerWidth||t.documentElement.clientWidth;"left"===n?(o.dispatchEvent("expandLeft"),o.klass.add(t.body,"snapjs-expand-left"),o.klass.remove(t.body,"snapjs-expand-right")):(o.dispatchEvent("expandRight"),o.klass.add(t.body,"snapjs-expand-right"),o.klass.remove(t.body,"snapjs-expand-left"),a*=-1),l.translate.easeTo(a)},this.on=function(e,t){return r[e]=t,this},this.off=function(e){r[e]&&(r[e]=!1)},this.enable=function(){o.dispatchEvent("enable"),l.drag.listen()},this.disable=function(){o.dispatchEvent("disable"),l.drag.stopListening()},this.settings=function(e){o.deepExtend(s,e)},this.state=function(){var e,t=l.translate.get.matrix(4);return e=t===s.maxPosition?"left":t===s.minPosition?"right":"closed",{state:e,info:i.simpleStates}},d(a)};"undefined"!=typeof module&&module.exports&&(module.exports=a),"undefined"==typeof ender&&(this.Snap=a),"function"==typeof define&&define.amd&&define("snap",[],function(){return a})}).call(this,window,document),function(e,t){"use strict";function n(e){for(var t=d.length-1;t>=0;t--)if(d[t].el.id===e)return d[t];return null}function a(e){for(var n="undefined"!=typeof e?e.detail.page:t.navigator().currentPage,a=document.querySelector(n),s=a.querySelector('[data-tab-contents="true"]'),i=d.length-1;i>=0;i--){var r=d[i],o=r.el.getAttribute("data-expose-aside");r.pages.indexOf(n)===-1?(r.el.style.display="none",r.el.style.visibility="hidden"):(r.snapper.settings({element:a}),r.el.style.display="block",r.el.style.visibility="visible",s&&d[i].snapper.disable(),"left"!==o&&"right"!==o||a.classList.contains("expose-aside-"+o)||a.classList.add("expose-aside-"+o),l||(s||"left"===o||"right"===o?(r.snapper.settings({touchToDrag:!1}),r.snapper.disable()):(r.snapper.settings({touchToDrag:!0}),r.snapper.enable())),!s&&l&&(r.snapper.settings({touchToDrag:!0}),r.snapper.enable()))}}function s(){var t=l;l=!matchMedia("only screen and (min-width: 641px)").matches,t!==l&&(e.setTimeout(function(){for(var e=d.length-1;e>=0;e--){var t=d[e];t.snapper.settings({maxPosition:t.el.clientWidth,minPosition:-t.el.clientWidth})}},500),a())}function i(e){c=e,e.snapper.open(e.direction),document.on(t.event.end,p)}function r(e){e.snapper.close(),c=null,document.off(t.event.end,p)}function o(){for(var e=t.navigator().currentPage,n=d.length-1;n>=0;n--){var a=d[n],s=a.el.getAttribute("data-expose-aside");if(a.pages.indexOf(e)!==-1){var i=a.snapper.state();if("closed"!==i.state){if(l)return r(a),!0;if(!l&&"left"!==s&&"right"!==s)return r(a),!0}return!1}}return!1}var l=!matchMedia("only screen and (min-width: 641px)").matches,d=[],c=null;t.onReady(function(){for(var e=document.querySelectorAll(".side-panel"),t=e.length-1;t>=0;t--){for(var n=e[t],a=n.getAttribute("data-disable"),s=n.getAttribute("data-page"),i=[],r=s.split(","),o=0,l=r.length;o<l;o++){var c=r[o].trim();if(0==o){var p=document.querySelector(c);p||console.error("SidePanel issue: The page: "+c+" does not exist. Please see data-page attribute.")}i.push(c)}var g={element:p,disable:null===a?"none":a,hyperextensible:!1,touchToDrag:!1,maxPosition:n.clientWidth,minPosition:-n.clientWidth},u=new Snap(g);d.push({snapper:u,el:n,pages:i,direction:n.classList.contains("side-panel-left")?"left":"right"})}}),document.on(t.event.tap,function(e){var t=e.target,a=t.getAttribute("data-side-panel-id"),s=t.getAttribute("data-side-panel-close");if("true"!==s){if(null!==a){var o=n(a);if(o){var d=o.snapper.state(),p=o.el.getAttribute("data-expose-aside");"closed"===d.state?("left"!==p&&"right"!==p||l)&&i(o):("left"!==p&&"right"!==p||l)&&r(o)}}}else if(c)r(c);else if(null!==a){var o=n(a);o&&r(o)}});var p=function(e){var t=e.target,n=!1;if(null!==c){for(;t&&t!==document;t=t.parentNode)if(t.classList.contains("side-panel")){n=!0;break}c&&!n&&(r(c),c=null)}};t.sidePanel=function(e){e=e.replace("#","");var t=n(e);if(null===t)throw new Error("The side panel with id ["+e+"] does not exists");return{open:function(){i(t)},close:function(){r(t)}}},t.sidePanelUtil={closeActive:o},e.on("resize",s),document.on("pageopened",a)}("undefined"!=typeof window?window:this,window.phonon||{});