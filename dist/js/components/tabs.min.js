!function(t){"use strict";function e(e){function n(){}function r(){return!1}function o(t,e){var i,s;for(i in e)if(e.hasOwnProperty(i)){switch(s=e[i],i){case"height":case"width":case"marginLeft":case"marginTop":s+="px"}t.style[i]=s}return t}function a(t,e){var i;for(i in e)t[i]=e[i];return t}function h(t,e){return function(){return t.apply(e,Array.prototype.slice.call(arguments))}}function c(t,i){var s;return s=e?e(i).find("."+t):Array.prototype.slice.call(i.getElementsByClassName(t))}function l(t,i,s,n,r){var a={};a[i]=s,e?e(t).animate(a,n,r):o(t,a)}function g(t){var e=t.touches,i=e&&e.length?e:t.changedTouches;return{x:y?i[0].pageX:t.pageX,y:y?i[0].pageY:t.pageY}}function d(t,e){var s=a({},m);for(this.settings=a(s,e),this.container=t,this.pageContainer=i.createElement("div"),this.scrollBorder={x:0,y:0},this.page=0,this.preventScroll=!1,this.pageCssProperties={margin:0},this._onStart=h(this._onStart,this),this._onMove=h(this._onMove,this),this._onEnd=h(this._onEnd,this),this._onKeydown=h(this._onKeydown,this),this._sizePages=h(this._sizePages,this),this._afterScrollTransform=h(this._afterScrollTransform,this);t.firstChild;)this.pageContainer.appendChild(t.firstChild);t.appendChild(this.pageContainer),this._scroll=x?this._scrollWithTransform:this._scrollWithoutTransform,this._animateScroll=x?this._animateScrollWithTransform:this._animateScrollWithoutTransform,o(t,C),setTimeout(h(function(){this.updateInstance(e),this.settings.preventDrag||this._observe(),this.settings.afterInitialize.call(this)},this),10)}function p(t,i,s){e?e(t).on(i,s):t.addEventListener(i,s,!1)}function u(t,i,s){e?e(t).off(i,s):t.removeEventListener(i,s,!1)}function f(){if(!t.getComputedStyle)return!1;var e,i=document.createElement("p"),s={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(i,null);for(var n in s)void 0!==i.style[n]&&(i.style[n]="translate3d(1px,1px,1px)",e=t.getComputedStyle(i).getPropertyValue(s[n]));return document.body.removeChild(i),void 0!==e&&e.length>0&&"none"!==e}var m={pageClass:"dragend-page",direction:"horizontal",minDragDistance:"40",onSwipeStart:n,onSwipeEnd:n,onDragStart:n,onDrag:n,onDragEnd:n,afterInitialize:n,keyboardNavigation:!1,stopPropagation:!1,itemsInPage:1,scribe:0,borderBetweenPages:0,duration:300,preventDrag:!1},y="ontouchstart"in s,v=y?"touchstart":"mousedown",b=y?"touchmove":"mousemove",w=y?"touchend":"mouseup",_={37:"left",38:"up",39:"right",40:"down"},T={pages:"No pages found"},C={overflow:"hidden",padding:0},P=function(){var t=i.createElement("div"),e="Khtml Ms O Moz Webkit".split(" "),s=e.length;return function(i){if(i in t.style)return!0;for(i=i.replace(/^[a-z]/,function(t){return t.toUpperCase()});s--;)if(e[s]+i in t.style)return!0;return!1}}(),x=P("transform");return a(d.prototype,{_checkOverscroll:function(t,e,i){var s={x:e,y:i,overscroll:!0};switch(t){case"right":if(!this.scrollBorder.x)return s.x=Math.round((e-this.scrollBorder.x)/5),s;break;case"left":if((this.pagesCount-1)*this.pageDimentions.width<=this.scrollBorder.x)return s.x=Math.round(-((Math.ceil(this.pagesCount)-1)*(this.pageDimentions.width+this.settings.borderBetweenPages))+e/5),s;break;case"down":if(!this.scrollBorder.y)return s.y=Math.round((i-this.scrollBorder.y)/5),s;break;case"up":if((this.pagesCount-1)*this.pageDimentions.height<=this.scrollBorder.y)return s.y=Math.round(-((Math.ceil(this.pagesCount)-1)*(this.pageDimentions.height+this.settings.borderBetweenPages))+i/5),s}return{x:e-this.scrollBorder.x,y:i-this.scrollBorder.y,overscroll:!1}},_xDown:0,_yDown:0,_observe:function(){p(this.container,v,this._onStart),this.container.onselectstart=r,this.container.ondragstart=r,this.settings.keyboardNavigation&&p(i.body,"keydown",this._onKeydown),p(s,"resize",this._sizePages)},_onStart:function(t){t=t.originalEvent||t,this.settings.stopPropagation&&t.stopPropagation(),this._xDown=t.touches?t.touches[0].clientX:t.clientX,this._yDown=t.touches?t.touches[0].clientY:t.clientY,p(i.body,b,this._onMove),p(i.body,w,this._onEnd),this.startCoords=g(t),this.settings.onDragStart.call(this,t)},_onMove:function(t){if(t=t.originalEvent||t,!(t.touches&&t.touches.length>1||t.scale&&1!==t.scale)){var e=t.touches?t.touches[0].clientX:t.clientX,i=t.touches?t.touches[0].clientY:t.clientY,s=this._xDown-e,n=this._yDown-i;Math.abs(s)>Math.abs(n)&&(t.preventDefault(),this.settings.stopPropagation&&t.stopPropagation());var r=this._parseEvent(t),o=this._checkOverscroll(r.direction,-r.distanceX,-r.distanceY);Math.abs(s)<Math.abs(n)||0===this.page&&"right"===r.direction||this.page+1===this.pagesCount&&"left"===r.direction||(this.settings.onDrag.call(this,this.activeElement,r,o.overscroll,t),this.preventScroll||this._scroll(o))}},_onEnd:function(t){t=t.originalEvent||t,this.settings.stopPropagation&&t.stopPropagation();var e=this._parseEvent(t);this.startCoords={x:0,y:0},Math.abs(e.distanceX)>this.settings.minDragDistance||Math.abs(e.distanceY)>this.settings.minDragDistance?this.swipe(e.direction):(e.distanceX>0||e.distanceX>0)&&this._scrollToPage(),this.settings.onDragEnd.call(this,this.container,this.activeElement,this.page,t),u(i.body,b,this._onMove),u(i.body,w,this._onEnd)},_parseEvent:function(t){var e=g(t),i=this.startCoords.x-e.x,s=this.startCoords.y-e.y;return this._addDistanceValues(i,s)},_addDistanceValues:function(t,e){var i={distanceX:0,distanceY:0};return"horizontal"===this.settings.direction?(i.distanceX=t,i.direction=t>0?"left":"right"):(i.distanceY=e,i.direction=e>0?"up":"down"),i},_onKeydown:function(t){var e=_[t.keyCode];e&&this._scrollToPage(e)},_setHorizontalContainerCssValues:function(){a(this.pageCssProperties,{cssFloat:"left",overflowY:"auto",overflowX:"hidden",padding:0,display:"block"}),o(this.pageContainer,{overflow:"hidden",width:(this.pageDimentions.width+this.settings.borderBetweenPages)*this.pagesCount,boxSizing:"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1e3,margin:0,padding:0})},_setVerticalContainerCssValues:function(){a(this.pageCssProperties,{overflow:"hidden",padding:0,display:"block"}),o(this.pageContainer,{"padding-bottom":this.settings.scribe,boxSizing:"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1e3,margin:0})},setContainerCssValues:function(){"horizontal"===this.settings.direction?this._setHorizontalContainerCssValues():this._setVerticalContainerCssValues()},_setPageDimentions:function(){var t=this.container.offsetWidth,e=this.container.offsetHeight;"horizontal"===this.settings.direction?t-=parseInt(this.settings.scribe,10):e-=parseInt(this.settings.scribe,10),this.pageDimentions={width:t,height:e}},_sizePages:function(){var t=this.pages.length;this._setPageDimentions(),this.setContainerCssValues(),"horizontal"===this.settings.direction?a(this.pageCssProperties,{height:this.pageDimentions.height,width:this.pageDimentions.width/this.settings.itemsInPage}):a(this.pageCssProperties,{height:this.pageDimentions.height/this.settings.itemsInPage,width:this.pageDimentions.width});for(var e=0;e<t;e++)o(this.pages[e],this.pageCssProperties);this._jumpToPage("page",this.page)},_calcNewPage:function(t,e){var i=this.settings.borderBetweenPages,s=this.pageDimentions.height,n=this.pageDimentions.width,r=this.page;switch(t){case"up":r<this.pagesCount-1&&(this.scrollBorder.y=this.scrollBorder.y+s+i,this.page++);break;case"down":r>0&&(this.scrollBorder.y=this.scrollBorder.y-s-i,this.page--);break;case"left":r<this.pagesCount-1&&(this.scrollBorder.x=this.scrollBorder.x+n+i,this.page++);break;case"right":r>0&&(this.scrollBorder.x=this.scrollBorder.x-n-i,this.page--);break;case"page":switch(this.settings.direction){case"horizontal":this.scrollBorder.x=(n+i)*e;break;case"vertical":this.scrollBorder.y=(s+i)*e}this.page=e;break;default:this.scrollBorder.y=0,this.scrollBorder.x=0,this.page=0}},_onSwipeEnd:function(){this.preventScroll=!1,this.activeElement=this.pages[this.page*this.settings.itemsInPage],this.settings.onSwipeEnd.call(this,this.container,this.activeElement,this.page)},_jumpToPage:function(t,e){t&&this._calcNewPage(t,e),this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y})},_scrollToPage:function(t,e){this.preventScroll=!0,t&&this._calcNewPage(t,e),this._animateScroll()},_scrollWithTransform:function(t){var e;e=f()?"horizontal"===this.settings.direction?"translate3d("+t.x+"px, 0, 0)":"translate3d(0, "+t.y+"px, 0)":"horizontal"===this.settings.direction?"translateX("+t.x+"px)":"translateY("+t.y+"px)",o(this.pageContainer,{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,"-o-transform":e,transform:e})},_animateScrollWithTransform:function(){var t="transform "+this.settings.duration+"ms ease-out",e=(this.container,this._afterScrollTransform);o(this.pageContainer,{"-webkit-transition":"-webkit-"+t,"-moz-transition":"-moz-"+t,"-ms-transition":"-ms-"+t,"-o-transition":"-o-"+t,transition:t}),this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y}),p(this.container,"webkitTransitionEnd",e),p(this.container,"oTransitionEnd",e),p(this.container,"transitionend",e),p(this.container,"transitionEnd",e)},_afterScrollTransform:function(){var t=this.container,e=this._afterScrollTransform;this._onSwipeEnd(),u(t,"webkitTransitionEnd",e),u(t,"oTransitionEnd",e),u(t,"transitionend",e),u(t,"transitionEnd",e),o(this.pageContainer,{"-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"",transition:""})},_scrollWithoutTransform:function(t){var e="horizontal"===this.settings.direction?{marginLeft:t.x}:{marginTop:t.y};o(this.pageContainer,e)},_animateScrollWithoutTransform:function(){var t="horizontal"===this.settings.direction?"marginLeft":"marginTop",e="horizontal"===this.settings.direction?-this.scrollBorder.x:-this.scrollBorder.y;l(this.pageContainer,t,e,this.settings.duration,h(this._onSwipeEnd,this))},swipe:function(t){this.settings.onSwipeStart.call(this,this.container,this.activeElement,this.page),this._scrollToPage(t)},updateInstance:function(t){if(t=t||{},"object"==typeof t&&a(this.settings,t),this.pages=c(this.settings.pageClass,this.pageContainer),!this.pages.length)throw new Error(T.pages);this.pagesCount=this.pages.length/this.settings.itemsInPage,this.activeElement=this.pages[this.page*this.settings.itemsInPage],this._sizePages(),this.settings.jumpToPage&&(this.jumpToPage(t.jumpToPage),delete this.settings.jumpToPage),this.settings.scrollToPage&&(this.scrollToPage(this.settings.scrollToPage),delete this.settings.scrollToPage),this.settings.destroy&&(this.destroy(),delete this.settings.destroy)},destroy:function(){var t=this.container;u(t,v),u(t,b),u(t,w),u(i.body,"keydown",this._onKeydown),u(s,"resize",this._sizePages),t.removeAttribute("style");for(var e=0;e<this.pages.length;e++)this.pages[e].removeAttribute("style");t.innerHTML=this.pageContainer.innerHTML},scrollToPage:function(t){this._scrollToPage("page",t-1)},jumpToPage:function(t){this._jumpToPage("page",t-1)}}),e&&(e.fn.dragend=function(t){return t=t||{},this.each(function(){var i=e(this).data("dragend");i?i.updateInstance(t):(i=new d(this,t),e(this).data("dragend",i)),"string"==typeof t&&i.swipe(t)}),this}),d}var i=document,s=t;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e(s.jQuery||s.Zepto)}):s.Dragend=e(s.jQuery||s.Zepto)}(window),function(t,e){"use strict";function i(t){var e="object"==typeof t?t.detail.page:t,i=document.querySelector(e),s=i.querySelector('[data-tab-contents="true"]');return i?void(i.querySelector(".tabs")&&n(e,i,s)):void console.error("The page "+e+" does not exists")}function s(t,i){for(var s=o.length-1;s>=0;s--)if(o[s].page===t){o[s].currentTab!==i&&(o[s].currentTab=i,e.navigator().callCallback("tabchanged",{page:t,tabNumber:i}));var n=document.querySelector(t).querySelector(".tab-indicator");if(n){var r=i-1;n.style.webkitTransform="translateX("+r+"00%)",n.style.MozTransform="translateX("+r+"00%)",n.style.msTransform="translateX("+r+"00%)",n.style.OTransform="translateX("+r+"00%)",n.style.transform="translateX("+r+"00%)"}o[s].dragend.scrollToPage(i);break}}function n(e,i,n){var r=i.querySelectorAll(".tab-items a"),a=i.querySelector(".tab-indicator"),h="true"===n.getAttribute("data-disable-swipe"),c=parseInt(n.getAttribute("data-tab-default",10));(isNaN(c)||c>r.length)&&(c=1),a.style.width=100/r.length+"%";var l={direction:"horizontal",minDragDistance:"100",preventDrag:h,duration:200,pageClass:"tab-content",onDragEnd:function(t,i,n){n+=1,s(e,n)}};o.push({page:e,dragend:new Dragend(n,l),currentTab:c}),t.setTimeout(function(){s(e,c)},10)}function r(t){for(var i=t.target,s=null;i&&i!==document;i=i.parentNode)if(i.classList.contains("tab-item")){s=i;break}if(s){for(var n=s.parentNode.parentNode,r=n.querySelectorAll(".tab-items a"),o=n.querySelector(".tab-indicator"),h=0,c=r.length;h<c&&s!==r[h];h++);var l=h+"00";o.style.webkitTransform="translateX("+l+"%)",o.style.MozTransform="translateX("+l+"%)",o.style.msTransform="translateX("+l+"%)",o.style.OTransform="translateX("+l+"%)",o.style.transform="translateX("+l+"%)";var g=e.navigator().currentPage;a(g,h+1)}}var o=[],a=function(e,i){if("string"!=typeof e)throw new Error("The first argument must be a string, "+typeof i+" given");if("number"!=typeof i)throw new Error("The second argument must be a number, "+typeof i+" given");t.setTimeout(function(){s(e,i)},10)};document.on("tap",r),document.on("pagecreated",i),e.tab=function(){return{setCurrentTab:a,init:function(t){t="undefined"==typeof t?e.navigator().currentPage:t,t||console.error("The page "+t+" does not exists"),i(t)}}}}("undefined"!=typeof window?window:this,window.phonon||{});